---
title: "Reproducible documents"
author: "Elisabeth Solmunde"
format: html
html:
    theme: yeti
editor: visual
---

-   Elisabeth Solmunde
-   Department of Clinical Epidemiology, Department of Clinical Medicine
-   Aarhus University and Aarhus University Hospital

# Introduction

The **aim** of this study is to investigate the *association* between...

# Methods and Results

This study was set in **Denmark** using *nationwide* registers...

## Analysis

We presented **descriptive** characteristics according to *exposure status*...

# Discussion

In this **nationwide**, register-based study we found that *caffeine*...

![Caffeine is a natural chemical with stimulant effect. It is for example found in coffee.](images/coffee.jpg){#fig-coffee width="75%" height="75%"}

## Visualizing data

```{r}
library(dplyr)
library(ggplot2)
library(tidyverse)
library(here)
library(readr)
nhanes_small <- read_csv(here("data", "nhanes_small.csv"))
```

### One variable plots

```{r}
#| fig-cap: "Distribution of BMI."
#| label: fig-bmi-histo
nhanes_small %>%
  filter(bmi <= 60) %>%
  ggplot(aes(x = bmi)) +
  geom_histogram(na.rm = T)
```

```{r}
nhanes_small %>%
  ggplot(aes(x = education)) +
  geom_bar()

nhanes_small %>%
  ggplot(aes(x = diabetes)) +
  geom_bar()
```

```{r}
#| label: fig-diabetes-education
#| fig-cap: "Counts of Diabetes and Education."
#| fig-subcap:
#|   - "Number of those with or without Diabetes."
#|   - "Number of those with different educational status."
#| layout-ncol: 2

library(dplyr)
library(ggplot2)

nhanes_small %>%
  filter(!is.na(diabetes)) %>%
  ggplot(aes(x = diabetes)) +
  geom_bar()

nhanes_small %>%
  filter(!is.na(education)) %>%
  ggplot(aes(x = education)) +
  geom_bar()
```
### Plotting two variables
```{r}
nhanes_small %>%
  ggplot(aes(x = bmi, y = bp_sys_ave)) +
  geom_hex(na.rm = T) +
  geom_smooth(na.rm = T)
```
```{r}
nhanes_small %>%
  filter(!is.na(education), !is.na(diabetes)) %>%
  ggplot(aes(x = diabetes, fill = education)) +
  geom_bar(position = position_dodge())
```
```{r}
nhanes_small %>%
  filter(!is.na(diabetes), bmi <= 60) %>%
  ggplot(aes(x = diabetes, y = bmi)) +
  geom_violin(na.rm = T)
```
